<?hh // strict

/**
 * This file is generated by invoking `hackmini commands:build`.
 * Do not manually edit this file.
 */

use HackPack\HackMini\Container\Exception\CircularDependency;

final class FactoryContainer
{

    <<__Memoize>>
    public function getAuth() : HackPack\HackMini\Sample\Auth
    {
        return $this->newAuth();
    }

    public function newAuth() : HackPack\HackMini\Sample\Auth
    {
        return $this->__build__('Auth', class_meth('HackPack\HackMini\Sample\Auth', 'factory'));
    }


    <<__Memoize>>
    public function getDb() : HackPack\HackMini\Sample\PdoDb
    {
        return $this->newDb();
    }

    public function newDb() : HackPack\HackMini\Sample\PdoDb
    {
        return $this->__build__('Db', class_meth('HackPack\HackMini\Sample\PdoDb', 'factory'));
    }


    <<__Memoize>>
    public function getMockDb() : HackPack\HackMini\Sample\MockDb
    {
        return $this->newMockDb();
    }

    public function newMockDb() : HackPack\HackMini\Sample\MockDb
    {
        return $this->__build__('MockDb', class_meth('HackPack\HackMini\Sample\MockDb', 'factory'));
    }


    <<__Memoize>>
    public function getNewUserPage() : NewUserPage
    {
        return $this->newNewUserPage();
    }

    public function newNewUserPage() : NewUserPage
    {
        return $this->__build__('NewUserPage', class_meth('NewUserPage', 'factory'));
    }


    <<__Memoize>>
    public function getRequireUser() : HackPack\HackMini\Sample\RequireUser
    {
        return $this->newRequireUser();
    }

    public function newRequireUser() : HackPack\HackMini\Sample\RequireUser
    {
        return $this->__build__('RequireUser', class_meth('HackPack\HackMini\Sample\RequireUser', 'factory'));
    }


    <<__Memoize>>
    public function getUserDetailPage() : UserDetailPage
    {
        return $this->newUserDetailPage();
    }

    public function newUserDetailPage() : UserDetailPage
    {
        return $this->__build__('UserDetailPage', class_meth('UserDetailPage', 'factory'));
    }


    <<__Memoize>>
    public function getUserStore() : HackPack\HackMini\Sample\UserStore
    {
        return $this->newUserStore();
    }

    public function newUserStore() : HackPack\HackMini\Sample\UserStore
    {
        return $this->__build__('UserStore', class_meth('HackPack\HackMini\Sample\UserStore', 'factory'));
    }


    <<__Memoize>>
    public function getMockUserStore() : HackPack\HackMini\Sample\UserStore
    {
        return $this->newMockUserStore();
    }

    public function newMockUserStore() : HackPack\HackMini\Sample\UserStore
    {
        return $this->__build__('MockUserStore', class_meth('HackPack\HackMini\Sample\UserStore', 'mocked'));
    }

    private Set<string> $names = Set{};

    private function __build__<T>(string $name, (function(this):T) $factory) : T
    {
        if($this->names->contains($name)) {
            throw new CircularDependency($name, $this->names);
        }
        $this->names->add($name);
        $result = $factory($this);
        $this->names->remove($name);
        return $result;
    }
}